{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://rise-forensics.org/schemas/event.schema.json",
  "title": "RISE Extracted Event",
  "description": "Event extracted from evidence (attack, arrest, displacement, etc.) with temporal/spatial data and entity involvement",
  "type": "object",
  "required": [
    "event_id",
    "event_type",
    "extraction_timestamp",
    "extraction_tool",
    "event_data",
    "extraction_provenance"
  ],
  "properties": {
    "event_id": {
      "type": "string",
      "pattern": "^evt_(attack|arrest|displacement|killing|torture|other)_[0-9]{3,}$",
      "description": "Unique event identifier",
      "examples": ["evt_attack_001", "evt_arrest_042"]
    },
    "event_type": {
      "type": "string",
      "enum": [
        "artillery_attack",
        "aerial_bombardment",
        "small_arms_attack",
        "village_raid",
        "arrest",
        "detention",
        "extrajudicial_killing",
        "torture",
        "forced_displacement",
        "forced_labor",
        "sexual_violence",
        "looting",
        "arson",
        "protest",
        "armed_clash",
        "other"
      ]
    },
    "extraction_timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "extraction_tool": {
      "type": "string",
      "pattern": "^rise-extract v\\d+\\.\\d+\\.\\d+$"
    },

    "event_data": {
      "type": "object",
      "required": ["description"],
      "properties": {
        "description": {
          "type": "string",
          "description": "Brief event description"
        },

        "temporal": {
          "type": "object",
          "required": ["date", "date_precision"],
          "properties": {
            "date": {
              "type": "string",
              "format": "date",
              "description": "Event date (ISO 8601)"
            },
            "time": {
              "type": "string",
              "pattern": "^([01]\\d|2[0-3]):([0-5]\\d):([0-5]\\d)$",
              "description": "Event time (HH:MM:SS)"
            },
            "timezone": {
              "type": "string",
              "default": "Asia/Yangon"
            },
            "date_precision": {
              "type": "string",
              "enum": ["exact", "approximate_day", "approximate_week", "approximate_month", "approximate_year", "range", "unknown"],
              "description": "Precision of date information"
            },
            "time_precision": {
              "type": "string",
              "enum": ["exact", "approximate_hour", "approximate_period", "unknown"]
            },
            "date_range": {
              "type": "object",
              "properties": {
                "start": {"type": "string", "format": "date"},
                "end": {"type": "string", "format": "date"}
              },
              "description": "Date range for fuzzy dates"
            },
            "original_text": {
              "type": "string",
              "description": "Original temporal reference from source"
            },
            "myanmar_calendar_date": {
              "type": "string",
              "pattern": "^\\d{4}_.+_\\d{1,2}$",
              "description": "Myanmar calendar representation (YYYY_MonthName_DD)",
              "examples": ["1382_Kason_15"]
            },
            "extraction_confidence": {
              "type": "number",
              "minimum": 0.0,
              "maximum": 1.0
            }
          }
        },

        "spatial": {
          "type": "object",
          "properties": {
            "primary_location": {
              "type": "object",
              "properties": {
                "entity_id": {"type": "string"},
                "name_burmese": {"type": "string"},
                "name_english": {"type": "string"},
                "township": {"type": "string"},
                "region": {"type": "string"},
                "coordinates": {
                  "type": "object",
                  "properties": {
                    "lat": {"type": "number"},
                    "lon": {"type": "number"},
                    "precision": {
                      "type": "string",
                      "enum": ["exact", "village", "township", "approximate"]
                    }
                  }
                },
                "extraction_confidence": {
                  "type": "number",
                  "minimum": 0.0,
                  "maximum": 1.0
                }
              }
            },
            "affected_area_radius_km": {
              "type": "number",
              "description": "Radius of affected area in kilometers"
            }
          }
        },

        "entities_involved": {
          "type": "object",
          "properties": {
            "perpetrators": {
              "type": "array",
              "items": {
                "type": "object",
                "required": ["entity_id", "role", "confidence"],
                "properties": {
                  "entity_id": {"type": "string"},
                  "role": {
                    "type": "string",
                    "enum": ["attacking_force", "commanding_officer", "perpetrator", "accomplice"]
                  },
                  "confidence": {
                    "type": "number",
                    "minimum": 0.0,
                    "maximum": 1.0
                  },
                  "evidence": {
                    "type": "string",
                    "description": "Evidence IDs supporting this attribution"
                  }
                }
              }
            },
            "victims": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "entity_id": {"type": "string"},
                  "role": {
                    "type": "string",
                    "enum": ["killed", "injured_civilian", "injured_combatant", "detained", "tortured", "displaced", "witness"]
                  },
                  "name": {"type": "string"},
                  "status": {
                    "type": "string",
                    "enum": ["killed", "injured", "detained", "missing", "displaced", "unknown"]
                  },
                  "confidence": {
                    "type": "number",
                    "minimum": 0.0,
                    "maximum": 1.0
                  },
                  "evidence": {"type": "string"}
                }
              }
            },
            "witnesses": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "entity_id": {"type": "string"},
                  "role": {"type": "string"},
                  "confidence": {
                    "type": "number",
                    "minimum": 0.0,
                    "maximum": 1.0
                  },
                  "evidence": {"type": "string"}
                }
              }
            }
          }
        },

        "incident_details": {
          "type": "object",
          "properties": {
            "weapon_type": {
              "type": "string",
              "enum": ["artillery", "small_arms", "aerial_bomb", "mortar", "rocket", "incendiary", "other", "unknown"]
            },
            "estimated_rounds": {"type": "string"},
            "tactics": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": ["indirect_fire", "direct_assault", "ambush", "siege", "raid", "aerial_strike", "forced_entry", "intimidation", "other"]
              }
            },
            "casualties": {
              "type": "object",
              "properties": {
                "killed": {"type": "integer", "minimum": 0},
                "injured": {"type": "integer", "minimum": 0},
                "missing": {"type": "integer", "minimum": 0},
                "confidence": {
                  "type": "number",
                  "minimum": 0.0,
                  "maximum": 1.0
                },
                "note": {"type": "string"}
              }
            },
            "damage": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": ["residential_building", "monastery", "church", "school", "hospital", "infrastructure", "agricultural", "commercial", "other"]
                  },
                  "count": {"type": "integer"},
                  "severity": {
                    "type": "string",
                    "enum": ["destroyed", "severely_damaged", "damaged", "minor_damage"]
                  }
                }
              }
            },
            "displacement": {
              "type": "object",
              "properties": {
                "families": {"type": "integer"},
                "individuals": {"type": "integer"},
                "destination": {"type": "string"}
              }
            }
          }
        }
      }
    },

    "extraction_provenance": {
      "type": "object",
      "required": ["source_evidence"],
      "properties": {
        "source_evidence": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "required": ["evidence_id", "relevance", "confidence"],
            "properties": {
              "evidence_id": {"type": "string"},
              "relevance": {
                "type": "string",
                "enum": ["primary_description", "corroborating_detail", "temporal_reference", "spatial_reference", "casualty_information"]
              },
              "confidence": {
                "type": "number",
                "minimum": 0.0,
                "maximum": 1.0
              }
            }
          }
        },
        "extraction_method": {
          "type": "string",
          "enum": ["ml_ner", "rule_based", "hybrid_ml_rules", "human_annotated"]
        },
        "confidence_breakdown": {
          "type": "object",
          "properties": {
            "overall": {"type": "number", "minimum": 0.0, "maximum": 1.0},
            "temporal": {"type": "number", "minimum": 0.0, "maximum": 1.0},
            "spatial": {"type": "number", "minimum": 0.0, "maximum": 1.0},
            "entities": {"type": "number", "minimum": 0.0, "maximum": 1.0},
            "incident_type": {"type": "number", "minimum": 0.0, "maximum": 1.0}
          }
        }
      }
    },

    "verification_notes": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["single_source_claim", "conflicting_information", "partial_information", "requires_corroboration"]
          },
          "note": {"type": "string"},
          "priority": {
            "type": "string",
            "enum": ["critical", "high", "medium", "low"]
          }
        }
      }
    }
  }
}
